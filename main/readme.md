# 检索和生成阶段

这一块编排了一套工作流，使用提示词工程的方法。

1.意图分类：大模型判断查询是查找论文、查找内容。如果是查找论文，就继续判断是根据作者或是内容查找论文。否则进入查找内容的步骤。

2.问题拆解：进入查找内容的流程，首先由大模型判断是否需要拆解，得到不拆解、拆解为并行子问题、拆解为递归子问题三类结果、

3.不同问题的处理：不拆解，就进入处理单个子问题的步骤：重写查询、混合检索、重排。 并行子问题：同步执行这些子问题的处理步骤。递归子问题：依次执行。

4.生成回复：根据不同的问题类型，设置不同的提示词模版。

## 检索
utils.py 封装了不同类型的检索方法。包括密集检索、稀疏检索、混合检索、检索后多模态内容组织等。

## 生成
llm_api.py 提供不同环节的大模型api方法，包括意图分类、问题拆解等。

app后缀的代码提供了流程编排的前端展示方法。

workflow.py是全部的后端代码。

## 评估
eval.py 使用ragas库进行自动化评估。
